<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Automation Dashboard - Daily Puzzle Post</title>
    <meta name="description" content="AI-accessible SEO automation dashboard for Daily Puzzle Post. Monitor keywords, track rankings, and optimize content automatically.">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #718096;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-card h3 {
            font-size: 1.1rem;
            color: #718096;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .stat-change {
            font-size: 0.9rem;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 500;
        }

        .stat-change.positive {
            background: #c6f6d5;
            color: #22543d;
        }

        .stat-change.negative {
            background: #fed7d7;
            color: #742a2a;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .main-panel, .side-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .panel-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .panel-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2d3748;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .keyword-list {
            list-style: none;
        }

        .keyword-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .keyword-item:last-child {
            border-bottom: none;
        }

        .keyword-name {
            font-weight: 500;
            color: #2d3748;
        }

        .keyword-rank {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .rank-good {
            background: #c6f6d5;
            color: #22543d;
        }

        .rank-medium {
            background: #faf089;
            color: #744210;
        }

        .rank-poor {
            background: #fed7d7;
            color: #742a2a;
        }

        .optimization-item {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .optimization-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .optimization-description {
            color: #718096;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .priority-badge {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .priority-high {
            background: #fed7d7;
            color: #742a2a;
        }

        .priority-medium {
            background: #faf089;
            color: #744210;
        }

        .priority-low {
            background: #c6f6d5;
            color: #22543d;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #718096;
        }

        .spinner {
            border: 3px solid #e2e8f0;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-endpoint {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            overflow-x: auto;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-online {
            background: #48bb78;
        }

        .status-offline {
            background: #f56565;
        }

        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .dashboard-container {
                padding: 15px;
            }
        }

        /* Print-friendly styles */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .stat-card, .main-panel, .side-panel {
                background: white;
                box-shadow: none;
                border: 1px solid #ccc;
            }
            
            .btn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>🎯 SEO Automation Dashboard</h1>
            <p>AI-powered SEO optimization for Daily Puzzle Post</p>
            <div style="margin-top: 15px;">
                <span class="status-indicator status-online"></span>
                <span>System Status: Online</span>
                <span style="margin-left: 20px; color: #718096;">Last Updated: <span id="lastUpdated">Loading...</span></span>
            </div>
        </div>

        <!-- Statistics Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Keywords</h3>
                <div class="stat-value" id="totalKeywords">-</div>
                <div class="stat-change positive" id="keywordChange">Loading...</div>
            </div>
            <div class="stat-card">
                <h3>Top 10 Rankings</h3>
                <div class="stat-value" id="topRankings">-</div>
                <div class="stat-change positive" id="rankingChange">Loading...</div>
            </div>
            <div class="stat-card">
                <h3>Pending Optimizations</h3>
                <div class="stat-value" id="pendingOptimizations">-</div>
                <div class="stat-change negative" id="optimizationChange">Loading...</div>
            </div>
            <div class="stat-card">
                <h3>SEO Score</h3>
                <div class="stat-value" id="seoScore">-</div>
                <div class="stat-change positive" id="scoreChange">Loading...</div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="content-grid">
            <!-- Main Panel -->
            <div class="main-panel">
                <div class="panel-header">
                    <h2 class="panel-title">📈 Keyword Performance</h2>
                    <div>
                        <button class="btn btn-secondary" onclick="refreshKeywords()">Refresh</button>
                        <button class="btn btn-primary" onclick="addKeyword()">Add Keyword</button>
                    </div>
                </div>
                
                <div id="keywordsList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading keyword data...</p>
                    </div>
                </div>
            </div>

            <!-- Side Panel -->
            <div class="side-panel">
                <div class="panel-header">
                    <h2 class="panel-title">⚡ Quick Actions</h2>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;" onclick="runSEOAudit()">
                        🔍 Run SEO Audit
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;" onclick="generateContent()">
                        📝 Generate Content
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; margin-bottom: 10px;" onclick="optimizeMetaTags()">
                        🏷️ Optimize Meta Tags
                    </button>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="exportData()">
                        📊 Export Data
                    </button>
                </div>

                <div class="panel-header">
                    <h3 class="panel-title">🎯 Priority Optimizations</h3>
                </div>
                
                <div id="optimizationsList">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading optimizations...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Documentation -->
        <div class="main-panel">
            <div class="panel-header">
                <h2 class="panel-title">🔌 API Endpoints (AI-Accessible)</h2>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
                <div>
                    <h4>Keyword Management</h4>
                    <div class="api-endpoint">GET /api/seo/keywords</div>
                    <div class="api-endpoint">POST /api/seo/keywords</div>
                    <div class="api-endpoint">PUT /api/seo/keywords/{id}</div>
                </div>
                <div>
                    <h4>Content Optimization</h4>
                    <div class="api-endpoint">GET /api/seo/optimizations</div>
                    <div class="api-endpoint">POST /api/seo/optimizations</div>
                    <div class="api-endpoint">POST /api/seo/optimizations/{id}/implement</div>
                </div>
                <div>
                    <h4>SEO Analysis</h4>
                    <div class="api-endpoint">GET /api/seo/audits</div>
                    <div class="api-endpoint">POST /api/seo/analyze/page</div>
                    <div class="api-endpoint">GET /api/seo/analytics/dashboard</div>
                </div>
                <div>
                    <h4>Content Management</h4>
                    <div class="api-endpoint">GET /api/seo/content</div>
                    <div class="api-endpoint">POST /api/seo/content</div>
                    <div class="api-endpoint">PUT /api/seo/content/{id}</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dashboard JavaScript
        let dashboardData = {};

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
            updateLastUpdated();
            
            // Auto-refresh every 30 seconds
            setInterval(loadDashboardData, 30000);
            setInterval(updateLastUpdated, 1000);
        });

        async function loadDashboardData() {
            try {
                // Load dashboard statistics
                const response = await fetch('/api/seo/analytics/dashboard');
                if (response.ok) {
                    dashboardData = await response.json();
                    updateDashboardStats();
                    await loadKeywords();
                    await loadOptimizations();
                } else {
                    console.error('Failed to load dashboard data');
                    showError('Failed to load dashboard data');
                }
            } catch (error) {
                console.error('Error loading dashboard:', error);
                showError('Error connecting to SEO API');
            }
        }

        function updateDashboardStats() {
            if (dashboardData.success && dashboardData.dashboard) {
                const stats = dashboardData.dashboard;
                
                document.getElementById('totalKeywords').textContent = stats.keyword_stats?.total_keywords || 0;
                document.getElementById('topRankings').textContent = stats.keyword_stats?.top_10_rankings || 0;
                document.getElementById('pendingOptimizations').textContent = stats.optimization_stats?.pending || 0;
                document.getElementById('seoScore').textContent = Math.round(stats.audit_stats?.average_score || 0);
                
                // Update change indicators (mock data for demo)
                document.getElementById('keywordChange').textContent = '+5 this week';
                document.getElementById('rankingChange').textContent = '+12 this week';
                document.getElementById('optimizationChange').textContent = '8 pending';
                document.getElementById('scoreChange').textContent = '+3.2 this week';
            }
        }

        async function loadKeywords() {
            try {
                const response = await fetch('/api/seo/keywords');
                if (response.ok) {
                    const data = await response.json();
                    displayKeywords(data.keywords || []);
                } else {
                    showError('Failed to load keywords');
                }
            } catch (error) {
                console.error('Error loading keywords:', error);
                showError('Error loading keywords');
            }
        }

        function displayKeywords(keywords) {
            const container = document.getElementById('keywordsList');
            
            if (keywords.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #718096; padding: 20px;">No keywords found. Add some keywords to get started!</p>';
                return;
            }

            const keywordHTML = keywords.map(keyword => {
                const rankClass = keyword.current_rank <= 10 ? 'rank-good' : 
                                keyword.current_rank <= 30 ? 'rank-medium' : 'rank-poor';
                const rankText = keyword.current_rank > 0 ? `#${keyword.current_rank}` : 'Not ranked';
                
                return `
                    <div class="keyword-item">
                        <div>
                            <div class="keyword-name">${keyword.keyword}</div>
                            <div style="font-size: 0.8rem; color: #718096; margin-top: 4px;">
                                Category: ${keyword.category} | Priority: ${keyword.priority}
                            </div>
                        </div>
                        <div class="keyword-rank ${rankClass}">${rankText}</div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `<ul class="keyword-list">${keywordHTML}</ul>`;
        }

        async function loadOptimizations() {
            try {
                const response = await fetch('/api/seo/optimizations?status=pending');
                if (response.ok) {
                    const data = await response.json();
                    displayOptimizations(data.optimizations || []);
                } else {
                    showError('Failed to load optimizations');
                }
            } catch (error) {
                console.error('Error loading optimizations:', error);
                showError('Error loading optimizations');
            }
        }

        function displayOptimizations(optimizations) {
            const container = document.getElementById('optimizationsList');
            
            if (optimizations.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #718096; padding: 20px;">No pending optimizations!</p>';
                return;
            }

            const optimizationHTML = optimizations.slice(0, 5).map(opt => {
                const priorityClass = `priority-${opt.estimated_impact}`;
                
                return `
                    <div class="optimization-item">
                        <div class="optimization-title">${opt.optimization_type.replace('_', ' ').toUpperCase()}</div>
                        <div class="optimization-description">${opt.page_url}</div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span class="priority-badge ${priorityClass}">${opt.estimated_impact} priority</span>
                            <button class="btn btn-primary" style="font-size: 0.8rem; padding: 5px 10px;" onclick="implementOptimization(${opt.id})">
                                Implement
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = optimizationHTML;
        }

        function updateLastUpdated() {
            document.getElementById('lastUpdated').textContent = new Date().toLocaleTimeString();
        }

        function showError(message) {
            console.error(message);
            // You could show a toast notification here
        }

        // Action functions
        function refreshKeywords() {
            loadKeywords();
        }

        function addKeyword() {
            const keyword = prompt('Enter keyword to track:');
            if (keyword) {
                fetch('/api/seo/keywords', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ keyword: keyword })
                }).then(() => loadKeywords());
            }
        }

        function runSEOAudit() {
            alert('SEO Audit started! Results will appear in the dashboard shortly.');
        }

        function generateContent() {
            alert('Content generation feature coming soon!');
        }

        function optimizeMetaTags() {
            alert('Meta tag optimization started!');
        }

        function exportData() {
            const data = JSON.stringify(dashboardData, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'seo-dashboard-data.json';
            a.click();
        }

        async function implementOptimization(id) {
            try {
                const response = await fetch(`/api/seo/optimizations/${id}/implement`, {
                    method: 'POST'
                });
                if (response.ok) {
                    alert('Optimization implemented successfully!');
                    loadOptimizations();
                } else {
                    alert('Failed to implement optimization');
                }
            } catch (error) {
                alert('Error implementing optimization');
            }
        }
    </script>
</body>
</html>

